{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://webpack-typescript/./src/core/constants.ts","webpack://webpack-typescript/./src/core/util.ts","webpack://webpack-typescript/./src/core/api.ts","webpack://webpack-typescript/./src/core/controller.ts","webpack://webpack-typescript/./src/index.ts"],"sourcesContent":["import { IDBConfig, IConstants } from \"./interfaces/others\";\r\n\r\nexport const config:IDBConfig = {\r\n  apiKey: \"AIzaSyAA8dQEt-yZnDyY3Lra8lndRJ3LWNYVW0o\",\r\n  authDomain: \"jumia-c15a3.firebaseapp.com\",\r\n  databaseURL: \"https://jumia-c15a3.firebaseio.com\",\r\n  projectId: \"jumia-c15a3\",\r\n  storageBucket: \"jumia-c15a3.appspot.com\",\r\n  messagingSenderId: \"295115190934\",\r\n  appId: \"1:295115190934:web:de0b33b53a514c3c\"\r\n}\r\n\r\nexport const gfConfig: IDBConfig = {\r\n  apiKey: \"AIzaSyCKGQw8QCq8qcxJ39QznQgarzOLP_WF1_Q\",\r\n  authDomain: \"jumia-17681.firebaseapp.com\",\r\n  databaseURL: \"https://jumia-17681.firebaseio.com\",\r\n  projectId: \"jumia-17681\",\r\n  storageBucket: \"jumia-17681.appspot.com\",\r\n  messagingSenderId: \"472156067665\",\r\n  appId: \"1:472156067665:web:976495829b072466\"\r\n}\r\n\r\nexport const constants = {\r\n  COLLECTION: \"productcomparator\",\r\n  DOCSEVENT: \"docs event\",\r\n  ABOUT: \"about\",\r\n  CONFIG: \"config\",\r\n  SEEALL: \"see all\",\r\n\r\n  SHEETNAME: \"campaign_calendar\",\r\n  NAME: \"Campaign Calendar\",\r\n  TANDCS: \"Campaign Calendar T & Cs\",\r\n  FOCUS: \"focus\",\r\n  BUILD: \"build\",\r\n  RESET: \"reset\",\r\n  TABLISTENER: \"tab listener\",\r\n  INSESSION: \"in session\",\r\n  AFTERSESSION: \"after session\",\r\n  BTWORB4SESSION: \"between or before session\",\r\n  TIMESLOTSTODISPLAY: 12,\r\n  SKUROWQUERY: \".-sku_row\",\r\n  MAINELQUERY: \".-main-el\",\r\n  FLIPPERQUERY: \".-flipper\",\r\n  FLIPPERBACKQUERY: \".-flipper .-back\",\r\n  SWITCHQUERY: \".-switcher\",\r\n  SELECTIONQUERY: \".-selection\",\r\n  CONTAINERQUERY: \".-container\",\r\n  LIVECLASS: \"-live\",\r\n  OOSCLASS: \"-oos\",\r\n  TABCLASS: \"-tab\",\r\n  CATTYPE: \"category\",\r\n  DIRBTN: \"dir-btn\",\r\n  COMPARE: \"compare\",\r\n  AM: \"am\",\r\n  PM: \"pm\",\r\n  TODAY: \"today\",\r\n  YESTERDAY: \"yesterday\",\r\n  TOMORROW: \"tomorrow\",\r\n  PREFIX: \"prefix\",\r\n  FREE: \"FREE\",\r\n  INITIATIVE: \"Campaign Calendar\",\r\n  TANDCSQUERY: \".-re.-rules\",\r\n  HOWITWORKSQUERY: \".-how-it-works\",\r\n  TOPBANNERQUERY: \".-banner.-top\",\r\n  FROMSTART: \"from start\",\r\n  CLICK: \"click\",\r\n\r\n  // Controller class constants\r\n  SHOWCLASS: \"-show\",\r\n  TXTCLASS: \".-txt\",\r\n  CLOSE: \"Close\",\r\n  TERMSANDCONDIIONS: \"Terms & Conditions\",\r\n  BANNERQUERY: \".-banner.-top img.lazy-image\",\r\n  DATASRC: \"data-src\",\r\n  KEYWORDS: [\"with\", \"and\", \"tv\"],\r\n\r\n  // Tabs class constants\r\n  TABQUERY: \".-tab\",\r\n  TABSQUERY: \".-all-tabs\",\r\n  TABSPARENTQUERY: \".-tabs\",\r\n  PREVQUERY: \".-control.-prev\",\r\n  NEXTQUERY: \".-control.-next\",\r\n  FIRSTTAB: \"first tab\",\r\n  ACTIVECLASS: \"active\",\r\n  DATATIME: \"data-time\",\r\n  NEXT: \"next\",\r\n  PREV: \"prev\",\r\n\r\n  // SKURows class constants\r\n  SKUSELQUERY: \".-skus\",\r\n  SKUROWCLASS: \"-sku_row -posrel\"\r\n}\r\n\r\nexport const fxn = {\r\n  idQuery: (query: string) => \"#initiative \" + query,\r\n  timeQuery: (time: number) => '.-sku_row[data-time=\"' + time + '\"]',\r\n  tabQuery: (time: number) => '.-tab[data-time=\"' + time + '\"]'\r\n}","import { IDomain, IRemoteConfig } from \"./interfaces/config\";\r\nimport { IPastAndFutureTimes } from \"./interfaces/others\";\r\nimport { constants, fxn } from \"./constants\";\r\nimport { ICampaignCalendar } from \"./interfaces/data\";\r\nimport { iConfig, iDynamicObject, iNames, iRemoteData } from \"./types/index\";\r\n\r\n// type TypeOrNull<T> = T | null;\r\n\r\nexport class Util {\r\n  private remoteData:iRemoteData;\r\n  private timeInterval:number = 0;\r\n  private currency: string;\r\n  private config: iConfig;\r\n  protected domain: string;\r\n  protected catalog: string;\r\n  protected el;\r\n  protected all;\r\n  private pad;\r\n  private capitalize;\r\n  protected isATab;\r\n  private midnight;\r\n  protected fbox;\r\n  protected isMobile = navigator.userAgent.toLowerCase().includes(\"mobi\")\r\n\r\n  constructor(remoteData: iRemoteData, fbox: any) {\r\n    this.remoteData = remoteData\r\n    this.currency = (this.remoteData.config as iConfig).currency\r\n    this.config = this.remoteData.config as iConfig\r\n    this.domain = this.remoteData.config?.domain as string\r\n    this.catalog = `${this.domain}/catalog/?shipped_from=country_local&seller_score=3-5&q=`\r\n    this.fbox = fbox\r\n\r\n    this.el = (query: string, parent?: HTMLElement) => parent ? parent.querySelector(fxn.idQuery(query)) as HTMLElement : document.querySelector(fxn.idQuery(query)) as HTMLElement\r\n    this.all = (query: string, parent?: HTMLElement) => parent ? parent.querySelectorAll(fxn.idQuery(query)) : document.querySelectorAll(fxn.idQuery(query))\r\n    this.pad = (time: number) => time.toString().length == 1 ? \"0\" + time : time\r\n    this.capitalize = (str: string) => str[0].toUpperCase() + str.slice(1)\r\n    this.isATab = (el: HTMLElement) => el.classList.contains(constants.TABCLASS) \r\n    this.midnight = (time: number | string) => +new Date(time).setHours(0, 0, 0, 0)\r\n  }\r\n\r\n  times(skus:ICampaignCalendar[]) {\r\n    const times = skus.map(sku => this.midnight(sku.time))\r\n    const uniqueTimes = Array.from(new Set(times))\r\n    return uniqueTimes.sort((a, b) => a - b)\r\n  }\r\n\r\n\r\n  timeUnits(time: number) {\r\n    const $date = new Date(time)\r\n    const day = $date.getDay()\r\n    const month = $date.getMonth()\r\n    const date = $date.getDate()\r\n    const hour = $date.getHours()\r\n    const mins = $date.getMinutes()\r\n\r\n    return { day, month, date, hour, mins }\r\n  }\r\n\r\n  twelveHrFormat(hour: number, mins: number) {\r\n    if (hour === 12) return `${this.pad(hour)}:${this.pad(mins)}${constants.PM}`\r\n    else if (hour > 12) return `${this.pad(hour - 12)}:${this.pad(mins)}${constants.PM}`\r\n    else if (hour === 0) return `12:${this.pad(mins)}${constants.AM}`\r\n    else return `${this.pad(hour)}:${this.pad(mins)}${constants.AM}`\r\n  }\r\n  \r\n  dayDiff(time: number) {\r\n    const timeDate = new Date(time).getDate()\r\n    return new Date().getDate() - timeDate\r\n  }\r\n\r\n  sameMonth(time: number) {\r\n    return new Date(time).getMonth() === new Date().getMonth()\r\n  }\r\n\r\n  date(time: number) {\r\n    const dayDiff = this.dayDiff(time)\r\n    if (dayDiff === 0 && this.sameMonth(time))\r\n      return this.capitalize(constants.TODAY)\r\n    else if (dayDiff === 1 && this.sameMonth(time))\r\n      return this.capitalize(constants.YESTERDAY)\r\n    else if (dayDiff === -1 && this.sameMonth(time))\r\n      return this.capitalize(constants.TOMORROW)\r\n    else return this.fullDate(time)\r\n  }\r\n\r\n  fullDate(time: number) {\r\n    const date = new Date(time)\r\n    const month = date.toLocaleDateString(\"en-US\", { month: \"short\" })\r\n    const day = date.toLocaleDateString(\"en-US\", { weekday: \"short\" })\r\n    return `${day} ${month} ${date.getDate()}`\r\n  }\r\n\r\n  toggle(toRemove: NodeListOf<Element>, toAdd: HTMLElement, className: string) {\r\n    toRemove.forEach(el => el.classList.remove(className))\r\n    toAdd.classList.add(className)\r\n  }\r\n\r\n  price(raw: string) {\r\n    const num = this.numFromStr(raw)\r\n    return `${this.currency} ${Number(num).toLocaleString()}`\r\n  }\r\n\r\n  numFromStr(str: string) {\r\n    const match = str.match(/\\d/g)\r\n    return match ? match.join(\"\") : 0\r\n  }\r\n\r\n  formatPrice(price: string) {\r\n\r\n    const pieces = price.split(\" \")\r\n    const value = Number(pieces[1].replace(\"₦\", \"\")) \r\n    if (isNaN(value)) return price\r\n\r\n    switch (this.config.currencyPosition) {\r\n      case constants.PREFIX:\r\n        return `Below ${this.currency} ${value.toLocaleString()}`\r\n      default:\r\n        return `Below ${value.toLocaleString()} ${this.currency}`\r\n    }\r\n  }\r\n\r\n  discount($old: string, $new: string) {\r\n    const diff = Number($old) - Number($new)\r\n    const ratio = diff * 100 / Number($old)\r\n    return !isNaN(ratio) ? `-${Math.round(ratio)}%` : \"\"\r\n  }\r\n\r\n  // continue from replace pattern\r\n  replacePattern(pattern: string | RegExp, str: string) {\r\n    const re = new RegExp(pattern, \"g\")\r\n    return str.replace(re, \"-\")\r\n  }\r\n\r\n  id(name: string, delim: string) {\r\n    const replaceApostrophe = this.replacePattern(\"'\", name)\r\n    const replaceAmpersand = this.replacePattern(\"&\", replaceApostrophe)\r\n    const replacePercent = this.replacePattern(\"%\", replaceAmpersand)\r\n    return replacePercent.toLowerCase().split(\" \").join(delim)\r\n  }\r\n\r\n  key(keyStr: string, obj: IRemoteConfig) {\r\n    type KeyType = keyof typeof obj\r\n    return keyStr as KeyType\r\n  }\r\n\r\n\r\n  timeFormat(time: number) {\r\n    const tUnits = this.timeUnits(time)\r\n    const t = this.twelveHrFormat(tUnits.hour, tUnits.mins)\r\n    return `${this.date(time)}'s ${t} sale`\r\n  }\r\n\r\n  show() {\r\n    let imageObserver = new this.fbox.ImageObserver()\r\n    console.log(\"featurebox is\", this.fbox)\r\n    imageObserver = null\r\n    return this\r\n  }\r\n\r\n  platform() {\r\n    const isMobile = 'ontouchstart' in window\r\n    const mBannerStr = constants.SHEETNAME + \"_mobile_banner\"\r\n    const dBannerStr = constants.SHEETNAME + \"_desktop_banner\"\r\n    const deeplinkStr = constants.SHEETNAME + \"_deeplink\"\r\n\r\n    const mBanner = this.config.mobileAppBanner\r\n    const dBanner = this.config.desktopBanner\r\n\r\n    const banner = isMobile ? mBanner : dBanner\r\n    \r\n    return { banner }\r\n  }\r\n\r\n  productProperties(name: iNames) {\r\n    const names = name.displayName.split(\" \") as string[]\r\n    const len = names?.length as number\r\n    const properties = []\r\n    for (let i = 0; i < len; i++) {\r\n      const word = names[i].toLowerCase()\r\n      if (word.length < 2) continue\r\n      if (name.singularName.indexOf(word) > -1) continue\r\n      if (constants.KEYWORDS.indexOf(word) > -1) continue\r\n\r\n      const property = word.trim().replace(\")\", \"\").replace(\"(\", \"\")\r\n      properties.push(property)\r\n    }\r\n\r\n    return properties\r\n  }\r\n}","import { iRemoteData } from \"./types/index\";\r\nimport { Util } from \"./util\";\r\n\r\nexport class Api extends Util{\r\n  constructor(remoteData: iRemoteData, fbox: any) {\r\n    super(remoteData, fbox)\r\n  }\r\n\r\n  \r\n  mobile(str: string) {\r\n    const start = str.indexOf('\"products\":')\r\n    const products = '{' + str.substring(start, str.length)\r\n    const eIdx = products.indexOf(',\"head\"')\r\n    return products.substring(0, eIdx - 1) + '}'\r\n  }\r\n\r\n  desktop(str: string) {\r\n    return ''\r\n  }\r\n\r\n  async products(url: string) {\r\n    const response = await fetch(url)\r\n    const text = await response.text()\r\n    // const startIdx = text.indexOf('\"products\":[{')\r\n    // const productsStr = '{' + text.substring(startIdx, text.length)\r\n    // const closingBraces = this.braceIndices(productsStr, this.escapeStr(\"}]\"))\r\n    // const endIdx = closingBraces[closingBraces.length - 1]\r\n    // const products = productsStr.substring(0, endIdx + 2) + '}'\r\n    const products = this.isMobile ? this.mobile(text) : this.desktop(text)\r\n    let skus: any[] = []\r\n    try {\r\n      localStorage.setItem(\"apiProducts\", products)\r\n      const parsed = JSON.parse(products).products\r\n      skus = parsed\r\n    } catch (error) {\r\n      console.info(error)\r\n      skus = []\r\n    }\r\n    return skus\r\n  }\r\n  \r\n  escapeStr(str: string) {\r\n    return str.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\r\n  }\r\n\r\n  braceIndices(str: string, brace: string) {\r\n    var regex = new RegExp(brace, \"gi\"), result, indices = []\r\n    while ((result = regex.exec(str))) {\r\n      indices.push(result.index)\r\n    }\r\n    return indices\r\n  }\r\n}","import { Api } from \"./api\";\r\nimport { constants } from \"./constants\";\r\nimport { iAbout, iCategory, iDynamicObject, iNames, iRemoteData, iSKU, iSuperblock } from \"./types/index\";\r\nimport { Util } from \"./util\";\r\n\r\nexport class Controller extends Util {\r\n  private tandcs: iAbout[]\r\n  private tandcsEl: HTMLElement\r\n  private hiwCTA: HTMLElement\r\n  private topBanner: HTMLElement\r\n  private mainEl: HTMLElement\r\n  private categories: iCategory[]\r\n  private productMap?: iSKU[]\r\n  private flipper: HTMLElement\r\n  private flipperBack: HTMLElement\r\n  private switchBtn: HTMLElement\r\n  private selection: HTMLElement\r\n  private api: Api\r\n\r\n  constructor(remoteData: iRemoteData, fbox: any) {\r\n    super(remoteData, fbox)\r\n\r\n    this.api = new Api(remoteData, fbox)\r\n    this.tandcs = remoteData.about as iAbout[]\r\n    this.categories = remoteData.categories as iCategory[]\r\n    this.productMap = []\r\n\r\n    this.tandcsEl = this.el(constants.TANDCSQUERY)\r\n    this.hiwCTA = this.el(constants.HOWITWORKSQUERY)\r\n    this.topBanner = this.el(constants.TOPBANNERQUERY)\r\n    this.mainEl = this.el(constants.MAINELQUERY)\r\n    this.flipper = this.el(constants.FLIPPERQUERY)\r\n    this.flipperBack = this.el(constants.FLIPPERBACKQUERY)\r\n    this.switchBtn = this.el(constants.SWITCHQUERY)\r\n    this.selection = this.el(constants.SELECTIONQUERY)\r\n\r\n    this.hiwCTA.addEventListener(constants.CLICK, this.toggleBanner.bind(this))\r\n\r\n    this.fbox.pubsub.subscribe(constants.RESET, this.init.bind(this))\r\n\r\n    this.init()\r\n      .setBanner()\r\n      .displayTAndCs()\r\n      .show()\r\n      .listeners()\r\n  }\r\n\r\n  init() {\r\n    console.log(\"this.categories\", this.categories)\r\n    // const randomized = [...this.categories].sort(() => Math.random() - 0.5)\r\n    // this.mainEl.innerHTML = randomized.map(this.buildSuperblock.bind(this)).join(\"\")\r\n    this.mainEl.innerHTML = this.buildSuperblock(this.categories)\r\n    this.flipper = this.el(constants.FLIPPERQUERY)\r\n    this.flipperBack = this.el(constants.FLIPPERBACKQUERY)\r\n    this.switchBtn = this.el(constants.SWITCHQUERY)\r\n\r\n    this.switchBtn.addEventListener('click', () => {\r\n      this.flipper.classList.toggle(\"-switch\")\r\n      this.positionAfterFlip()\r\n    })\r\n\r\n    return this\r\n  }\r\n\r\n  positionAfterFlip() {\r\n    this.flipper.scrollTop = 0\r\n    this.flipper.scrollLeft = 0\r\n  }\r\n\r\n  listeners() {\r\n    this.mainEl.addEventListener(\"click\", this.handleClick.bind(this))\r\n  }\r\n\r\n  handleClick(evt: Event) {\r\n    const target: HTMLElement = evt.target as HTMLElement\r\n\r\n    const type = target.getAttribute(\"data-type\")\r\n\r\n    switch (type) {\r\n      case constants.CATTYPE:\r\n        const category = target.getAttribute(\"data-category\")\r\n        this.updateProductFloor(category as string)\r\n        break;\r\n      case constants.DIRBTN:\r\n        const direction = target.getAttribute(\"data-dir\")\r\n        const productfloor = target.parentElement\r\n        const scrollale = this.el(\".-product-scrollable\", productfloor as HTMLElement).parentElement\r\n        console.log(\"scrollable\", scrollale, \"direction\", direction)\r\n        direction === constants.NEXT\r\n        ? this.scrollTonext(scrollale as HTMLElement)\r\n        : this.scrollToprev(scrollale as HTMLElement)\r\n        break;\r\n      case constants.SEEALL:\r\n        const url = target.getAttribute(\"data-href\")\r\n        location.href = url as string\r\n        break;\r\n      case constants.COMPARE:\r\n        this.updateSelection(target)\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n  }\r\n\r\n  updateSelection(target: HTMLElement) {\r\n    const selection = this.selectionObject(target)\r\n    const html = this.selectionHtml(selection)\r\n\r\n    const back = this.el(\".-back\", this.selection)\r\n    back.innerHTML = html\r\n\r\n    this.show()\r\n    \r\n    this.flipAndPopulateSimilarProducts(selection)\r\n  }\r\n\r\n  flipAndPopulateSimilarProducts(selection: iSKU) {\r\n    this.flipSimilarProducts()\r\n    const url = this.catalog + selection.singularName\r\n    this.api.products(url)\r\n    .then(this.populateSimilarProducts.bind(this))\r\n  }\r\n\r\n  flipSimilarProducts() {\r\n    const sfxn = this.selection.classList\r\n    const fFxn = this.flipper.classList\r\n\r\n    !sfxn.contains(\"-switch\") && sfxn.add(\"-switch\")\r\n    !fFxn.contains(\"-switch\") && fFxn.add(\"-switch\")\r\n    this.positionAfterFlip()\r\n    this.flipperBack.innerHTML = this.spinLoader()\r\n  }\r\n\r\n  populateSimilarProducts(data: iSKU[]) {\r\n    this.flipperBack.innerHTML = data.map(this.skuHtmlHorizontal.bind(this)).join(\"\")\r\n    this.show()\r\n  }\r\n\r\n  selectionObject(target: HTMLElement) {\r\n    const singularName = (target.getAttribute(\"data-singular-name\") as string).toLowerCase()\r\n    const sku = target.getAttribute(\"data-sku\")\r\n    const skuObj = this.productMap?.find((product: iSKU) => product.sku === sku) as iSKU\r\n    const names: iNames = { displayName: skuObj.displayName, singularName }\r\n    skuObj.properties = this.productProperties(names)\r\n    skuObj.singularName = singularName\r\n    return skuObj\r\n  }\r\n\r\n  oldPriceAndDiscount(selection: iSKU) {\r\n    return `<div class=\"-price -old\">${selection.prices.oldPrice}</div><div class=\"-discount\">${selection.prices.discount}</div>`\r\n  }\r\n\r\n  selectionHtml (selection: iSKU) {\r\n\r\n    const btnHtml = selection.properties?.map(this.btnHtml.bind(this)).join(\"\")\r\n\r\n    const oldPriceAndDiscount = selection.prices.oldPrice ? this.oldPriceAndDiscount(selection) : \"\"\r\n    \r\n    return `<div class=\"-sku -posrel\" data-sku=\"${selection.sku}\"><a href=\"${selection.url}\" target=\"_blank\" class=\"-img -posrel\"><span class=\"-posabs -preloader -hide\"></span><img class=\"lazy-image\" data-src=\"${selection.image}\" alt=\"sku_img\"></a><div class=\"-details\"><div class=\"-detail-props\"><div class=\"-name\">${selection.displayName}</div><div class=\"-prices\"><div class=\"-price -new\">${selection.prices.price}</div>${oldPriceAndDiscount} </div></div><div class=\"-btns\">${btnHtml}</div></div></div>`\r\n  }\r\n\r\n  btnHtml(name: string) {\r\n    return `<div class=\"-btn -cta -posrel\"><div class=\"-btn-clickable -posabs\" data-name=\"${name}\" data-type=\"selection-btn\"></div><div class=\"-txt\">${name}</div></div>`\r\n  }\r\n\r\n  scrollTonext(scrollable: HTMLElement) {\r\n    var start = scrollable.scrollLeft + 80, end = scrollable.scrollLeft + 300\r\n    var delta = end - start;\r\n    scrollable.scrollLeft = start + delta * 1;\r\n  }\r\n\r\n  scrollToprev(scrollable: HTMLElement) {\r\n    var start = scrollable.scrollLeft - 80, end = scrollable.scrollLeft - 300\r\n    var delta = end - start;\r\n    scrollable.scrollLeft = start + delta * 1;\r\n  } \r\n\r\n  buildSuperblock(categories: iCategory[]) {\r\n    let superblockHtml = `<div class=\"-superblock\" data-name=\"bestsellers\">`\r\n    const title = `<div class=\"-title\"><span>bestsellers</span><button class=\"-switcher\">switch</button></div>`\r\n    const freelinks = this.buildFreelinks(categories)\r\n    const productFloor = this.buildProductFloor(categories[0])\r\n\r\n    superblockHtml += title\r\n    superblockHtml += freelinks\r\n    superblockHtml += productFloor\r\n    superblockHtml += '</div>'\r\n    \r\n    return superblockHtml\r\n  }\r\n\r\n  updateProductFloor(category: string) {\r\n    const productFloor = this.el(\".-productfloor\")\r\n    const productFloorTitle = this.el(\".-productfloor .-title\")\r\n    const productFloorSeeAll = this.el(\".-see-all-clickable\")\r\n\r\n    const catObj = this.categories.find(cat => cat.plural_name === category)\r\n\r\n    productFloorTitle.innerHTML = `<div class=\"-title-name\">${category}</div><div class=\"-title-desc\">${this.formatPrice(catObj?.price_point as string)}</div>`\r\n    \r\n    productFloorSeeAll.setAttribute(\"data-href\", catObj?.url as string)\r\n\r\n    const actual = this.el(\".-skus.-actual\", productFloor)\r\n\r\n    const skus = catObj?.skus.slice(0,16).map((sku: iSKU) => this.skuHtml(sku, catObj)).join(\"\")\r\n    this.productMap = catObj?.skus\r\n\r\n    actual.innerHTML = `<div class=\"-product-scrollable\">${skus}</div>`\r\n    this.show()\r\n  }\r\n\r\n  spinLoader() {\r\n    return '<div aria-label=\"spinloader\" class=\"spin-loader\"></div>'\r\n  }\r\n\r\n  buildFreelinks(categories: iCategory[]) {\r\n    let catHtml = '<div class=\"-cats -posrel -single -flipper\">'\r\n    const freelinks = categories.map(category => this.catHtml(category))\r\n    .join(\"\")\r\n    catHtml += categories.length > 0 ? `<div class=\"-scrollable -front\">${freelinks}</div><div class=\"-back\"></div>` : \"\"\r\n    catHtml += '</div>'\r\n    return catHtml\r\n  }\r\n\r\n  catHtml(category: iCategory) {\r\n    return `<div class=\"-cat -posrel\" data-category=\"${category.plural_name}\" data-url=\"${category.url}\" ><span class=\"-posabs -preloader -loading\"></span><div class=\"-clickable -posabs\" data-type=\"category\" data-category=\"${category.plural_name}\"></div><span class=\"-posabs -preloader -loading\" data-type=\"category\"></span><img class=\"lazy-image\" data-src=\"${category.image}\" alt=\"${category.plural_name}\" /><div class=\"-posabs -name\"><div class=\"-txt -posabs -name-el\">${category.plural_name}</div><div class=\"-bg -posabs -name-el\"></div></div><div class=\"-price-point\">${this.formatPrice(category.price_point)}</div></div>`\r\n  }\r\n\r\n  buildProductFloor(category: iCategory) {\r\n    const prevNextButtons = this.isMobile ? '' : '<div class=\"-control -prev -posabs\" data-dir=\"prev\" data-type=\"dir-btn\"><span class=\"-posabs -preloader -loading\"></span></div><div class=\"-control -next -posabs\"  data-type=\"dir-btn\" data-dir=\"next\"><span class=\"-posabs -preloader -loading\"></span></div>'\r\n\r\n    let html = `<div class=\"-productfloor active -posrel\" data-name=\"${category.plural_name}\">${prevNextButtons}`\r\n\r\n    html += `<div class=\"-head\"><div class=\"-title\"><div class=\"-title-name\">${category.plural_name}</div><div class=\"-title-desc\">top deals</div></div><div class=\"-see-all\"><span class=\"-see-all-clickable\"  data-href=\"${category.url}\" data-type=\"see all\"></span><span class=\"-txt\">See all</span><span class=\"-arrow\" style=\"border: 2px solid black\"></span></div></div>`\r\n\r\n    const skus = category.skus.slice(0,16).map((sku: iSKU) => this.skuHtml(sku, category)).join(\"\")\r\n    this.productMap = category.skus\r\n\r\n    html += `<div class=\"-skus -actual\"><div class=\"-product-scrollable\">${skus}</div></div>`\r\n\r\n    html += \"</div>\"\r\n    return html\r\n  }\r\n\r\n  skuHtmlHorizontal(sku: iSKU) {\r\n    \r\n    const oldPriceAndDiscount = sku.prices.oldPrice ? this.oldPriceAndDiscount(sku) : \"\"\r\n    return `<div class=\"-sku -posrel -available\" data-sku=\"${sku.sku}\"><a href=\"${sku.url}\" target=\"_blank\" class=\"-img -posrel\"><span class=\"-posabs -preloader -hide\"></span><img class=\"lazy-image loaded\" data-src=\"${sku.image}\" alt=\"sku_img\" /></a><div class=\"-details\"><div class=\"-name\">${sku.displayName}</div><div class=\"-prices\"><div class=\"-price -new\">${sku.prices.price}</div>${oldPriceAndDiscount} </div></div></div>`\r\n  }\r\n\r\n  skuHtml(skuObj: iSKU, category: iCategory) {\r\n    const {\r\n      sku, displayName,\r\n      url, prices: { price, discount },\r\n      image\r\n    } = skuObj\r\n    const discountHtml = discount ? `<div class=\"-discount -posabs\">${discount}</div>` : \"\"\r\n\r\n    return `\r\n    <div data-sku=\"${sku}\" class=\"-posrel -sku\"><a href=\"${url}\" class=\"-img -posrel\"><span class=\"-posabs -preloader -loading\"></span><img class=\"lazy-image\" data-src=\"${image}\" alt=\"${displayName}\" /></a>${discountHtml} <div class=\"-details\"><div class=\"-name\">${displayName}</div><div class=\"-newPrice\">${price}</div><div class=\"-atc-compare\"><a href=\"${url}\" class=\"-cta -atc\">Add to cart</a><a href=\"#initiative\" class=\"-cta -compare\" data-sku=\"${sku}\" data-singular-name=\"${category.singular_name}\" data-type=\"compare\">Compare</a></div></div></div>\r\n    `\r\n  }\r\n\r\n  toggleBanner() {\r\n    this.topBanner.classList.toggle(constants.SHOWCLASS)\r\n    const hiwText = this.hiwCTA.querySelector(constants.TXTCLASS) as HTMLElement\r\n    hiwText.textContent = hiwText?.textContent === constants.TERMSANDCONDIIONS\r\n      ? constants.CLOSE : constants.TERMSANDCONDIIONS\r\n  }\r\n\r\n  setBanner() {\r\n    const bannerImage = this.el(constants.BANNERQUERY)\r\n    bannerImage.setAttribute(constants.DATASRC, this.platform().banner)\r\n    return this\r\n  }\r\n\r\n  displayTAndCs() {\r\n    this.tandcsEl.innerHTML = this.tandcs.map(this.tandcHTML.bind(this)).join(\"\")\r\n    return this\r\n  }\r\n\r\n  tandcHTML(tandc: iAbout) {\r\n    return `<div class=\"-rule_element\"><div class=\"-vatop -num\">${tandc.num}</div><div class=\"-vatop -desc\"><div class=\"-question\">${tandc.question}</div><div class=\"-answer\">${tandc.answer}</div></div></div>`\r\n  }\r\n}","import { config, constants, gfConfig } from \"./core/constants\";\r\nimport { Controller } from \"./core/controller\"; \r\nimport { iRemoteData } from \"./core/types/index\";\r\nimport { Util } from \"./core/util\";\r\n\r\nconst wind = window as any\r\n// Note: \"about\" in the line below is important to prevent fetch of config document\r\nconst fbox = wind.Featurebox({ config }, \"about\")\r\n// let controller: Controller\r\n\r\nconst databaseOperations = () => {\r\n  const database = new fbox.Database(gfConfig)\r\n  database.getAll(constants.COLLECTION, constants.DOCSEVENT)\r\n}\r\n\r\ndatabaseOperations()\r\n\r\nfbox.pubsub.subscribe(constants.DOCSEVENT, (data: any) => {\r\n  let remoteData = {\r\n    categories: [],\r\n    about: [],\r\n    config: {\r\n      countryLocale: \"\",\r\n      desktopBanner: \"\",\r\n      mobileAppBanner: \"\",\r\n      mlp: \"\",\r\n      currency: \"\",\r\n      domain: \"\",\r\n      currencyPosition: \"\"\r\n    }\r\n  }\r\n  \r\n  const keys = Object.keys(data)\r\n  keys.map(key => {\r\n    switch (key) {\r\n      case constants.ABOUT: remoteData.about = data[key].list\r\n        break;\r\n      case constants.CONFIG: remoteData.config = data[key]\r\n        break;\r\n      default: remoteData.categories = data[key].list\r\n        break;\r\n    }\r\n  })\r\n  console.log(\"remoteData is\", remoteData, remoteData.categories[0])\r\n  new Controller(remoteData, fbox)\r\n})\r\n\r\n\r\n\r\nfbox.pubsub.subscribe(fbox.FETCHED_DATA, (data: any) => {\r\n  // const remoteData:IRemoteData = data as IRemoteData\r\n  // controller = new Controller(remoteData, fbox)\r\n  // const calendar:any[] = controller.getData(constants.NAME)\r\n  // const times: number[] = controller.times(calendar)\r\n  // console.log(\"data is\", data)\r\n})"],"names":["constants","COLLECTION","DOCSEVENT","ABOUT","CONFIG","SEEALL","SHEETNAME","NAME","TANDCS","FOCUS","BUILD","RESET","TABLISTENER","INSESSION","AFTERSESSION","BTWORB4SESSION","TIMESLOTSTODISPLAY","SKUROWQUERY","MAINELQUERY","FLIPPERQUERY","FLIPPERBACKQUERY","SWITCHQUERY","SELECTIONQUERY","CONTAINERQUERY","LIVECLASS","OOSCLASS","TABCLASS","CATTYPE","DIRBTN","COMPARE","AM","PM","TODAY","YESTERDAY","TOMORROW","PREFIX","FREE","INITIATIVE","TANDCSQUERY","HOWITWORKSQUERY","TOPBANNERQUERY","FROMSTART","CLICK","SHOWCLASS","TXTCLASS","CLOSE","TERMSANDCONDIIONS","BANNERQUERY","DATASRC","KEYWORDS","TABQUERY","TABSQUERY","TABSPARENTQUERY","PREVQUERY","NEXTQUERY","FIRSTTAB","ACTIVECLASS","DATATIME","NEXT","PREV","SKUSELQUERY","SKUROWCLASS","fxn","query","Util","constructor","remoteData","fbox","timeInterval","isMobile","navigator","userAgent","toLowerCase","includes","this","currency","config","domain","catalog","el","parent","querySelector","document","all","querySelectorAll","pad","time","toString","length","capitalize","str","toUpperCase","slice","isATab","classList","contains","midnight","Date","setHours","times","skus","map","sku","Array","from","Set","sort","a","b","timeUnits","$date","day","getDay","month","getMonth","date","getDate","hour","getHours","mins","getMinutes","twelveHrFormat","dayDiff","timeDate","sameMonth","fullDate","toLocaleDateString","weekday","toggle","toRemove","toAdd","className","forEach","remove","add","price","raw","num","numFromStr","Number","toLocaleString","match","join","formatPrice","pieces","split","value","replace","isNaN","currencyPosition","discount","$old","$new","ratio","Math","round","replacePattern","pattern","re","RegExp","id","name","delim","replaceApostrophe","replaceAmpersand","key","keyStr","obj","timeFormat","tUnits","t","show","imageObserver","ImageObserver","console","log","platform","window","mBanner","mobileAppBanner","dBanner","desktopBanner","banner","productProperties","names","displayName","len","properties","i","word","singularName","indexOf","property","trim","push","Api","super","mobile","start","products","substring","eIdx","desktop","url","response","fetch","text","localStorage","setItem","JSON","parse","error","info","escapeStr","braceIndices","brace","result","regex","indices","exec","index","Controller","api","tandcs","about","categories","productMap","tandcsEl","hiwCTA","topBanner","mainEl","flipper","flipperBack","switchBtn","selection","addEventListener","toggleBanner","bind","pubsub","subscribe","init","setBanner","displayTAndCs","listeners","innerHTML","buildSuperblock","positionAfterFlip","scrollTop","scrollLeft","handleClick","evt","target","getAttribute","category","updateProductFloor","direction","productfloor","parentElement","scrollale","scrollTonext","scrollToprev","location","href","updateSelection","selectionObject","html","selectionHtml","flipAndPopulateSimilarProducts","flipSimilarProducts","then","populateSimilarProducts","sfxn","fFxn","spinLoader","data","skuHtmlHorizontal","skuObj","find","product","oldPriceAndDiscount","prices","oldPrice","btnHtml","image","scrollable","delta","superblockHtml","buildFreelinks","buildProductFloor","productFloor","productFloorTitle","productFloorSeeAll","catObj","cat","plural_name","price_point","setAttribute","actual","skuHtml","catHtml","freelinks","prevNextButtons","singular_name","hiwText","textContent","tandcHTML","tandc","question","answer","Featurebox","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","Database","getAll","countryLocale","mlp","Object","keys","list","FETCHED_DATA"],"sourceRoot":""}